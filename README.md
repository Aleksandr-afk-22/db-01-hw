# Домашнее задание к занятию «Базы данных, их типы»

## Задание 1. СУБД

**Кейс**
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

### 1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

**Ответ 1.1**

Для решения данной задачи лучше всего подойдут реляциннные СУБД. SQL СУБД гарантируют целостность и четкую структуру данных. Поддерживают ACID транзакции.

**Примеры подходящих СУБД:** PostgreSQL, Oracle Database, MySQL, MariaDB

### 1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

**Ответ 1.2**

Для лендинга лучше подходят документо-орентированные NoSQL СУБД. Данные от лидов могут меняться (разные поля в формах), а документная модель позволяет не менять схему каждый раз.

Для CRM подходят реляционные модели. Целостность данных (ACID) и удобная работа со сложными связями.

## 1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

**Ответ 1.2***

PostgreSQL поддерживает оба типа работы. Используются реляционные таблицы для CRM и JSONB для лендингов.

### 1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

**Ответ1.3**

Подходит реляционная СУБД, например PostgreSQL, MySQL. Обеспечивается иерархия, структура компании легко реализуется через связи таблиц. Чёткая схема данных. Встроенные механизмы целостности (Foreign Keys) гарантируют, что документы не «потеряются» в структуре отделов.

### 1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

**Ответ1.4**

Для логистики лучшим выбором считаются графовые СУБД. Графовые СУБД хранят связи как сущности, что обеспечивает максимальную скорость построения маршрутов.

**Примеры подходящих СУБД:** Neo4j 

## Задание 2. Транзакции

### 2.1 Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

**Ответ2.1**

  1. Начало транзакции
  Система инициирует транзакцию в СУБД. Это гарантирует, что все последующие операции будут рассматриваться как единое целое: либо все выполнятся, либо ни одна не вступит в силу.
  2. Проверка достаточности средств на платёжном счёте.
  СУБД выполняет запрос для проверки баланса счёта пользователя
  3. Списание суммы с платёжного счёта.
  При подтверждении достаточности средств СУБД выполняет операцию списания. Баланс счёта пользователя уменьшается на сумму пополнения.
  4. Пополнение баланса телефонного номера.
  Баланс телефона увеличивается на указанную сумму.
  5. Фиксация операции в журнале транзакций.
  Для обеспечения долговечности и возможности аудита создаётся запись в таблице истории операций. Запись содержит все ключевые данные о транзакции для последующего анализа.
  6. Фиксация транзакции
  Если все предыдущие шаги выполнены успешно, СУБД фиксирует транзакцию.Все изменения становятся постоянными и видимыми для других пользователей.

## Задание 3. SQL vs NoSQL

### 3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

**Ответ3.1**

  1. ACID-транзакции
  Гарантированная целостность данных при любых сбоях.
  2. Жёсткая схема данных (Schema‑on‑write) с валидацией при записи
  Структура таблиц и типы данных задаются заранее. Ограничения (типы полей, NOT NULL, FOREIGN KEY) гарантируют, что в базу попадут только корректные данные.
  3. Стандартизированный язык запросов (SQL)
  Единый, хорошо документированный и широко изученный язык.
  4. Поддержка сложных запросов (JOIN, подзапросы)
  Операции JOIN оптимизированы для быстрого объединения данных из нескольких таблиц.
  5. Минимизация дублирования данных за счёт нормализации
  Данные хранятся централизованно: каждая сущность — в одной таблице, остальные ссылаются на неё по ID.

## Задание 4. Кластеры

**Кейс**

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

**Ответ4**

  Критерий выбора - Для 1000 машин критично отсутствие единой точки отказа и узких мест в памяти диске. Каждая нода должна быть независимой. В качестве архитектуры выбираем Shared Nothing.

  Модель распределённых вычислений - MPP (Massively Parallel Processing).
Эта модель обеспечивает линейную масштабированность запрос делится на 1000 подзадач, каждая машина обрабатывает свою часть данных одновременно. При падении одной машины процесс не останавливается, задача перераспределяется.

  Рекомендуемый тип СУБД - Распределённая колоночная СУБД (например, ClickHouse, Greenplum)